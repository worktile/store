@if (items$ | async; as items) {
  <section class="item-app">
    <section class="main">
      <ul class="item-list">
        @for (item of items; track item._id) {
          <li [class.active]="activeItemsStore.activeId === item.id" [class.editing]="item.editing">
            <div class="view">
              <label (click)="setActiveItem(item.id)" (dblclick)="edit(item)">{{ item.title }}</label>
            </div>
            @if (item.editing) {
              <input
                class="edit"
                [value]="item.title"
                #editor
                (blur)="stopEditing(item, editor.value)"
                (keyup.enter)="update(item, editor.value)"
                (keyup.escape)="cancelEditing(item)"
              />
            }
          </li>
        }
      </ul>
    </section>
    <footer class="footer">
      @if (activeItemsStore.activeId) {
        <button class="clear-active" (click)="clearActiveItem()">Clear active</button>
      }
    </footer>
  </section>
}

<p>activeItemsStore.activeId :{{ activeItemsStore.activeId() }}</p>
<p>activeItemsStore.activeEntity:{{ activeItemsStore.activeEntity() | json }}</p>
<p>activeItemsStore.activeId$:{{ activeItemsStore.activeId$ | async }}</p>
<p>activeItemsStore.activeEntity$:{{ activeItemsStore.activeEntity$ | async | json }}</p>
